(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"./components/molecules/driSelectBack.vue":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__("./node_modules/@storybook/core-common/node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/@storybook/core-common/node_modules/core-js/modules/es.array.for-each.js"),__webpack_require__("./node_modules/@storybook/core-common/node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/@storybook/core-common/node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/@storybook/core-common/node_modules/core-js/modules/es.array.filter.js"),__webpack_require__("./node_modules/core-js/modules/es.number.constructor.js"),__webpack_require__("./node_modules/core-js/modules/es.object.to-string.js"),__webpack_require__("./node_modules/core-js/modules/web.dom-collections.for-each.js"),__webpack_require__("./node_modules/core-js/modules/es.array.map.js"),__webpack_require__("./node_modules/core-js/modules/es.array.filter.js");var lib=__webpack_require__("./node_modules/vue-props-validation/lib/index.js"),helper=__webpack_require__("./plugins/helper.js"),molecules_driSelectBackvue_type_script_lang_js_={props:{target:{type:Array,required:!0,validator:Object(lib.arrayValidator)({type:Object,validator:Object(lib.objectValidator)({id:String,count:Number})})},driItems:{type:Array,default:function _default(){return[]},required:!0,validator:Object(lib.arrayValidator)({type:Object,validator:Object(lib.objectValidator)({id:String,En:Number,Pr:Number,Va:Number,max_vol:Number,Name:String})})},max:{type:Number,default:1e6}},data:function data(){return{fieldDRI:[{key:"id",sortable:!0,tdClass:"d-none",thClass:"d-none"},{key:"Name",sortable:!1},{key:"number",sortable:!1}],sortBy:"id",fieldTableDri:[{key:"Item",sortable:!1},{key:"Value",sortable:!1}],tablePop:[],tableDri:[]}},watch:{target:{deep:!0,immediate:!0,handler:function handler(){this.updateAllTable()}}},methods:{formatNumber:function formatNumber(val,index){return 0===index?"mixed":5===index?val:Object(helper.l)(val,index-1)},statusPopulationNumber:function statusPopulationNumber(val){return val>=0&&val<=this.max},updateAllTable:function updateAllTable(){this.tablePop.length=0,this.tablePop=JSON.parse(JSON.stringify(this.updateTablePop(this.driItems,this.target))),this.tableDri.length=0,this.tableDri=JSON.parse(JSON.stringify(this.updateTableDri(this.tablePop)));var res={};this.tableDri.forEach((function(val){res[val.Item]=val.Value}));var res2={En:Number(res.Energy),Pr:Number(res.Protein),Va:Number(res.Vit_A),Fe:Number(res.Iron)};this.$emit("changeNutritionValue",{total:res2,target:this.target})},updateTableDri:function updateTableDri(dat){var result={En:0,Pr:0,Va:0,Fe:0};return dat.forEach((function(value){result.En+=Number(value.En)*Number(value.number),result.Pr+=Number(value.Pr)*Number(value.number),result.Va+=Number(value.Va)*Number(value.number),result.Fe+=Number(value.Fe)*Number(value.number)})),[{Item:"target",Value:"mixed"},{Item:"Energy",Value:result.En},{Item:"Protein",Value:result.Pr},{Item:"Vit_A",Value:result.Va},{Item:"Iron",Value:result.Fe},{Item:"id",Value:0}]},updateTablePop:function updateTablePop(driValue,targetValue){return driValue.map((function(driItem){var res=targetValue.filter((function(item){return Number(item.id)===Number(driItem.id)}));return driItem.number=res.length?res[0].count:0,driItem}))},tablePop2Target:function tablePop2Target(dat){return dat.map((function(item){return{id:item.id,count:Number(item.number)}}))}}},componentNormalizer=__webpack_require__("./node_modules/vue-loader/lib/runtime/componentNormalizer.js");const __vuedocgen_export_0=Object(componentNormalizer.a)(molecules_driSelectBackvue_type_script_lang_js_,(function render(){var _vm=this,_c=_vm._self._c;return _c("b-container",[_c("b-table",{staticClass:"jest_table",attrs:{striped:"",bordered:"","head-row-variant":"success","table-variant":"light",fixed:!0,items:_vm.tablePop,fields:_vm.fieldDRI,"sort-by":_vm.sortBy,small:""},on:{"update:sortBy":function updateSortBy($event){_vm.sortBy=$event},"update:sort-by":function updateSortBy($event){_vm.sortBy=$event}},scopedSlots:_vm._u([{key:"cell(number)",fn:function fn(data){return[_c("b-form-input",{attrs:{state:_vm.statusPopulationNumber(data.item.number),type:"number",size:"sm"},on:{input:function input($event){_vm.$emit("update:target",_vm.tablePop2Target(_vm.tablePop))}},model:{value:data.item.number,callback:function callback($$v){_vm.$set(data.item,"number",$$v)},expression:"data.item.number"}})]}}])}),_vm._v(" "),_c("b-table",{staticClass:"jest_table",attrs:{striped:"",bordered:"",small:"",fixed:!0,"head-row-variant":"success","table-variant":"light",items:_vm.tableDri,fields:_vm.fieldTableDri},scopedSlots:_vm._u([{key:"cell(Value)",fn:function fn(data){return[_c("span",{staticClass:"text-info"},[_vm._v(_vm._s(_vm.formatNumber(data.value,data.index)))])]}}])}),_vm._v("\n  KC: KiloCalorie, MC: MegaCalorie, GC: GigaCalorie\n")],1)}),[],!1,null,null,null).exports;__webpack_exports__.default=__vuedocgen_export_0;__vuedocgen_export_0.__docgenInfo={description:"- 対象となる年齢、性別、人数を設定することで、当該グループの栄養必要量をemit",tags:{},exportName:"default",displayName:"driSelectBack",props:[{name:"target",description:"ターゲットグループの構成：v-modelで使用\n  [{ id: 1, count: 1}, { id: 2, count: 5}, { id: 3, count: 0}]",type:{name:"array"},required:!0},{name:"driItems",description:'driのデータセット\n  ex.\n         [{\n           En: "1088.0",\n           Fe: "5.8",\n           max_vol: "900",\n           Name: "child 6-23 month",\n           Pr: "11.65",\n           Va: "400.0",\n           id: 0\n          }],',type:{name:"array"},required:!0,defaultValue:{func:!1,value:"[]"}},{name:"max",description:"target.countの上限値",type:{name:"number"},defaultValue:{func:!1,value:"1000000"}}],events:[{name:"update:target"},{name:"changeNutritionValue",description:"必要栄養量の更新を親コンポーネントに通知",type:{names:["undefined"]}}],sourceFiles:["/Users/shunichinakada/Documents/nuxt/nfaApp01/components/molecules/driSelectBack.vue"]}}}]);